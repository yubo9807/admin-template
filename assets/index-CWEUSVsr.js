import{m as b,D as B,I as V,q as v,u as k,d as y,_ as P,e as F,w as a,r as p,o as I,b as n,a as u,k as w,v as C,H as x,A as q}from"./index-B4TZ5wGE.js";function E(){return Promise.resolve(["auth code",null])}function R(o){return Promise.resolve([null,{code:200,data:{token:"to.ken.360"}}])}const U=()=>{const o=v(),e=k(),c=b(),s=B({username:"admin",password:"admin",captcha:"",code:"",uuid:""}),g={username:{required:!0,message:"请输入用户名",trigger:"blur"},password:{required:!0,message:"请输入密码",trigger:"blur"},code:{required:!0,message:"请输入验证码",trigger:"blur"}},m=V();t();async function t(){const[i,d]=await E();if(i)return;const{imageBase64:r,uuid:f}=d.data;s.captcha="data:image/png;base64,"+r,s.uuid=f}async function l(){m.value.validate(async i=>{if(!i)return;const[d,r]=await R({username:s.username,password:s.password,code:s.code,uuid:s.uuid});if(d)return;c.signIn(r.data.tokenValue);const f=o.query.redirect||"/";e.replace(f)})}return{formRef:m,form:s,rules:g,getCaptcha:t,signIn:l}},A={setup(){const o=y(!1);return{...U(),exposePassword:o}}},D=["src"];function K(o,e,c,s,g,m){const t=p("el-input"),l=p("el-form-item"),i=p("el-button"),d=p("el-form");return I(),F(d,{ref:"formRef",model:o.form,rules:o.rules,class:"login","label-width":"60px","label-position":"top"},{default:a(()=>[n(l,{label:"账号",prop:"username"},{default:a(()=>[n(t,{modelValue:o.form.username,"onUpdate:modelValue":e[0]||(e[0]=r=>o.form.username=r),placeholder:"请输入账号",clearable:!1},{prefix:a(()=>e[6]||(e[6]=[u("i",{class:"iconfont"},"",-1)])),_:1},8,["modelValue"])]),_:1}),n(l,{label:"密码",prop:"password"},{default:a(()=>[n(t,{modelValue:o.form.password,"onUpdate:modelValue":e[3]||(e[3]=r=>o.form.password=r),placeholder:"请输入密码",clearable:!1,type:s.exposePassword?"text":"password"},{prefix:a(()=>e[7]||(e[7]=[u("i",{class:"iconfont"},"",-1)])),suffix:a(()=>[w(u("i",{class:"iconfont",onClick:e[1]||(e[1]=r=>s.exposePassword=!s.exposePassword)},"",512),[[C,!s.exposePassword]]),w(u("i",{class:"iconfont",onClick:e[2]||(e[2]=r=>s.exposePassword=!s.exposePassword)},"",512),[[C,s.exposePassword]])]),_:1},8,["modelValue","type"])]),_:1}),n(l,{label:"验证码",prop:"code"},{default:a(()=>[n(t,{modelValue:o.form.code,"onUpdate:modelValue":e[5]||(e[5]=r=>o.form.code=r),placeholder:"请输入验证码",clearable:!1,onKeyup:x(o.signIn,["enter"])},{prefix:a(()=>e[8]||(e[8]=[u("i",{class:"iconfont"},"",-1)])),suffix:a(()=>[u("img",{src:o.form.captcha,alt:"验证码",height:"40",onClick:e[4]||(e[4]=(...r)=>o.getCaptcha&&o.getCaptcha(...r))},null,8,D)]),_:1},8,["modelValue","onKeyup"])]),_:1}),n(i,{type:"primary",class:"sign-in-button",onClick:o.signIn},{default:a(()=>e[9]||(e[9]=[q("登录")])),_:1},8,["onClick"])]),_:1},8,["model","rules"])}const S=P(A,[["render",K],["__scopeId","data-v-1037aa99"]]);export{S as default};
