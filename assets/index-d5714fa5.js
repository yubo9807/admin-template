import{p as b,G as B,J as _,K as y,L as V,s as v,u as k,d as x,_ as F,e as I,w as r,r as p,o as P,b as n,a as u,k as w,v as C,I as E,B as R}from"./index-bf3abf0e.js";const U=()=>{const o=v(),e=k(),c=b(),s=B({username:"admin",password:"admin",captcha:"",code:"",uuid:""}),g={username:{required:!0,message:"请输入用户名",trigger:"blur"},password:{required:!0,message:"请输入密码",trigger:"blur"},code:{required:!0,message:"请输入验证码",trigger:"blur"}},m=_();t();async function t(){const[i,d]=await y();if(i)return;const{imageBase64:a,uuid:f}=d.data;s.captcha="data:image/png;base64,"+a,s.uuid=f}async function l(){m.value.validate(async i=>{if(!i)return;const[d,a]=await V({username:s.username,password:s.password,code:s.code,uuid:s.uuid});if(d)return;c.signIn(a.data.tokenValue);const f=o.query.redirect||"/";e.replace(f)})}return{formRef:m,form:s,rules:g,getCaptcha:t,signIn:l}},q={setup(){const o=x(!1);return{...U(),exposePassword:o}}};const K=["src"];function A(o,e,c,s,g,m){const t=p("el-input"),l=p("el-form-item"),i=p("el-button"),d=p("el-form");return P(),I(d,{ref:"formRef",model:o.form,rules:o.rules,class:"login","label-width":"60px","label-position":"top"},{default:r(()=>[n(l,{label:"账号",prop:"username"},{default:r(()=>[n(t,{modelValue:o.form.username,"onUpdate:modelValue":e[0]||(e[0]=a=>o.form.username=a),placeholder:"请输入账号",clearable:!1},{prefix:r(()=>e[6]||(e[6]=[u("i",{class:"iconfont"},"",-1)])),_:1},8,["modelValue"])]),_:1}),n(l,{label:"密码",prop:"password"},{default:r(()=>[n(t,{modelValue:o.form.password,"onUpdate:modelValue":e[3]||(e[3]=a=>o.form.password=a),placeholder:"请输入密码",clearable:!1,type:s.exposePassword?"text":"password"},{prefix:r(()=>e[7]||(e[7]=[u("i",{class:"iconfont"},"",-1)])),suffix:r(()=>[w(u("i",{class:"iconfont",onClick:e[1]||(e[1]=a=>s.exposePassword=!s.exposePassword)},"",512),[[C,!s.exposePassword]]),w(u("i",{class:"iconfont",onClick:e[2]||(e[2]=a=>s.exposePassword=!s.exposePassword)},"",512),[[C,s.exposePassword]])]),_:1},8,["modelValue","type"])]),_:1}),n(l,{label:"验证码",prop:"code"},{default:r(()=>[n(t,{modelValue:o.form.code,"onUpdate:modelValue":e[5]||(e[5]=a=>o.form.code=a),placeholder:"请输入验证码",clearable:!1,onKeyup:E(o.signIn,["enter"])},{prefix:r(()=>e[8]||(e[8]=[u("i",{class:"iconfont"},"",-1)])),suffix:r(()=>[u("img",{src:o.form.captcha,alt:"验证码",height:"40",onClick:e[4]||(e[4]=(...a)=>o.getCaptcha&&o.getCaptcha(...a))},null,8,K)]),_:1},8,["modelValue","onKeyup"])]),_:1}),n(i,{type:"primary",class:"sign-in-button",onClick:o.signIn},{default:r(()=>e[9]||(e[9]=[R("登录")])),_:1,__:[9]},8,["onClick"])]),_:1},8,["model","rules"])}const N=F(q,[["render",A],["__scopeId","data-v-1037aa99"]]);export{N as default};
