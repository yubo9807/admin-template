import{d as b,D as N,T as V,p as k,g as T,N as C,a2 as U,P as E,a3 as w,_ as A,r as s,o as g,e as I,w as r,b as o,c as D,i as R,F as B,A as O}from"./index-BSlZPnKU.js";const P=()=>{const l=T(),t=l.props,d=b(!1),a=N({name:"",method:"",url:"",menuId:""}),_={name:{required:!0,message:"请输入接口名称",trigger:"blur"},method:{required:!0,message:"请选择方法",trigger:"blur"},url:{required:!0,message:"请输入Url",trigger:"blur"}};async function y(){l.refs.formRef.validate(async e=>{e&&(t.type===0?m():u())})}async function m(){const n=C(a),[e]=await U(n);e||(E.success("添加成功"),d.value=!1,l.emit("success"))}async function u(){const n=C({id:t.need.id,...a}),[e]=await w(n);e||(E.success("修改成功"),d.value=!1,l.emit("success"))}const f=V("getRoleList"),p=V("getMenuList"),c=b([]),i=b([]);k(()=>d.value,n=>{if(n){if(c.value=f(),i.value=p(),t.type===0&&(a.menuId=t.need.menuId),t.type===1)for(const e in a)a[e]=t.need[e]}else{l.refs.formRef.resetFields();for(const e in a)a[e]=""}});function v(n){a.menuId=n.id}return{visible:d,menuList:i,methodList:[{value:"GET"},{value:"POST"},{value:"PUT"},{value:"DELETE"},{value:"HEAD"},{value:"CONNECT"},{value:"OPTIONS"},{value:"TRACE"},{value:"PATCH"}],form:a,rules:_,submit:y,treeNodeClick:v}},F={props:{type:{type:Number,default:0},need:{type:Object,default:()=>({})}},setup:P};function q(l,t,d,a,_,y){const m=s("el-input"),u=s("el-form-item"),f=s("el-option"),p=s("el-select"),c=s("el-tree-select"),i=s("el-button"),v=s("el-form"),n=s("el-dialog");return g(),I(n,{modelValue:l.visible,"onUpdate:modelValue":t[4]||(t[4]=e=>l.visible=e),width:"400px"},{default:r(()=>[o(v,{ref:"formRef","label-width":"100px",model:l.form,rules:l.rules},{default:r(()=>[o(u,{label:"接口名称",prop:"name"},{default:r(()=>[o(m,{modelValue:l.form.name,"onUpdate:modelValue":t[0]||(t[0]=e=>l.form.name=e)},null,8,["modelValue"])]),_:1}),o(u,{label:"方法",prop:"method"},{default:r(()=>[o(p,{modelValue:l.form.method,"onUpdate:modelValue":t[1]||(t[1]=e=>l.form.method=e)},{default:r(()=>[(g(!0),D(B,null,R(l.methodList,(e,L)=>(g(),I(f,{key:L,label:e.value,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(u,{label:"Url",prop:"url"},{default:r(()=>[o(m,{modelValue:l.form.url,"onUpdate:modelValue":t[2]||(t[2]=e=>l.form.url=e)},null,8,["modelValue"])]),_:1}),o(u,{label:"父级菜单"},{default:r(()=>[o(c,{modelValue:l.form.menuId,"onUpdate:modelValue":t[3]||(t[3]=e=>l.form.menuId=e),data:l.menuList,clearable:"",props:{children:"children",label:"title",value:"id"},"render-after-expand":!1,disabled:d.type===0,onNodeClick:l.treeNodeClick},null,8,["modelValue","data","disabled","onNodeClick"])]),_:1}),o(u,null,{default:r(()=>[o(i,{type:"primary",onClick:l.submit},{default:r(()=>t[5]||(t[5]=[O("确认")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}const $=A(F,[["render",q]]);export{$ as default};
